<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />


<meta name="author" content="Arturo Maldonado" />


<title>Clase 10 y 11</title>

<script src="site_libs/header-attrs-2.26/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/cosmo.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/jqueryui-1.13.2/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<script src="site_libs/navigation-1.1/codefolding.js"></script>
<script src="site_libs/navigation-1.1/sourceembed.js"></script>
<link href="site_libs/highlightjs-9.12.0/textmate.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<link href="site_libs/font-awesome-6.4.2/css/all.min.css" rel="stylesheet" />
<link href="site_libs/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet" />

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>




<style type="text/css">
#rmd-source-code {
  display: none;
}
</style>





<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark the anchor link active (and if it's in a dropdown, also mark that active)
  var dropdown = menuAnchor.closest('li.dropdown');
  if (window.bootstrap) { // Bootstrap 4+
    menuAnchor.addClass('active');
    dropdown.find('> .dropdown-toggle').addClass('active');
  } else { // Bootstrap 3
    menuAnchor.parent().addClass('active');
    dropdown.addClass('active');
  }

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before, .tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "\e259";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "\e258";
  font-family: 'Glyphicons Halflings';
  border: none;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->
<style type="text/css">
.code-folding-btn { margin-bottom: 4px; }
</style>



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-bs-toggle="collapse" data-target="#navbar" data-bs-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Estadística_1</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="index.html">Home</a>
</li>
<li>
  <a href="intro.html">Introducción</a>
</li>
<li>
  <a href="basico.html">Procedimientos básicos</a>
</li>
<li>
  <a href="clase1.html">Clase 1</a>
</li>
<li>
  <a href="clase2.html">Clase 2</a>
</li>
<li>
  <a href="clase3.html">Clase 3</a>
</li>
<li>
  <a href="clase4.html">Clase 4</a>
</li>
<li>
  <a href="clase5.html">Clase 5</a>
</li>
<li>
  <a href="clase6.html">Clase 6</a>
</li>
<li>
  <a href="repaso.html">Repaso</a>
</li>
<li>
  <a href="clase7.html">Clase 10</a>
</li>
<li>
  <a href="clase9.html">Clase 11</a>
</li>
<li>
  <a href="clase12.html">Clase 12</a>
</li>
<li>
  <a href="clase13.html">Clase 13</a>
</li>
<li>
  <a href="clase14.html">Clase 14</a>
</li>
<li>
  <a href="about.html">About</a>
</li>
<li>
  <a href="https://github.com/arturomaldonado/Estadistica_1.0">
    <span class="fab fa-github"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">

<div class="btn-group pull-right float-right">
<button type="button" class="btn btn-default btn-xs btn-secondary btn-sm dropdown-toggle" data-toggle="dropdown" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span>Code</span> <span class="caret"></span></button>
<ul class="dropdown-menu dropdown-menu-right" style="min-width: 50px;">
<li><a id="rmd-download-source" href="#">Download Rmd</a></li>
</ul>
</div>



<h1 class="title toc-ignore">Clase 10 y 11</h1>
<h4 class="author">Arturo Maldonado</h4>
<h4 class="date">21-28/05/2024</h4>

</div>


<div id="introducción" class="section level1">
<h1>Introducción</h1>
<p>La prueba t y la prueba de ANOVA analiza el impacto de una variable
independiente categórica en una variable dependiente numérica. El paso
que vamos a dar en esta sección es analizar la <strong>relación
bivariada entre dos variables de factor (o categóricas)</strong>. Esta
evaluación se realiza mediante la prueba de chi-cuadrado.</p>
<ul>
<li><p>Chi-cuadrado:</p>
<ul>
<li><p>Variable independiente (país) -&gt; Variable dependiente (apoyo a
la democracia).</p></li>
<li><p>Variable independiente (situación económica) -&gt; Variable
dependiente (satisfacción con la vida)</p></li>
<li><p>Variable independiente(nivel educativo) -&gt; Variable
dependiente (satisfacción con la democracia)</p></li>
</ul></li>
</ul>
</div>
<div id="tablas-de-contingencia" class="section level1">
<h1>Tablas de contingencia</h1>
<p>Se trata de tablas de doble entrada (como mínimo) para analizar los
datos de variables categóricas. Una variable va en las filas y otra en
las columnas. Se puede tener los totales por filas o por columnas, que
se llaman “distribuciones marginales” y que coinciden con la
distribución de la variable individual.</p>
<p>Se puede calcular porcentajes de 3 maneras:</p>
<ul>
<li><p>Porcentajes por filas</p></li>
<li><p>Porcentajes por columnas</p></li>
<li><p>Porcentaje sobre el total</p></li>
</ul>
<p>Se recomienda que la variable independiente sea colocada en las
columnas y la variable dependiente en las filas. Si se calcula los
porcentajes por columnas de esta manera, se podrá comparar las
distribuciones condicionales de la variable dependiente por cada grupo
de la variable independiente.</p>
<p>En este documento vamos a trabajar con el reporte comparado <em>El
Pulso de la Democracia</em>, disponible <a
href="https://www.vanderbilt.edu/lapop/ab2018/2018-19_AmericasBarometer_Regional_Report_Spanish_W_03.27.20.pdf">aquí</a>.
Este reporte presenta los principales hallazgos del proyecto del
Barómetro de las Américas, organizado por el Proyecto de Opinión Pública
en América Latina (<a
href="https://www.vanderbilt.edu/lapop/">LAPOP</a>, por sus siglas en
inglés). En este documento se reportan los resultados de la última ronda
disponible de 2023.</p>
<p>Pueden descargar los datos de manera libre <a
href="%5Bhttp://datasets.americasbarometer.org/database/login.php">aquí</a>.](<a
href="http://datasets.americasbarometer.org/database/login.php"
class="uri">http://datasets.americasbarometer.org/database/login.php</a>).)
En este enlace, se pueden registrar o entrar como “Free User”. En el
buscador, se puede ingresar el texto “2023”. Ahí se tendrá acceso a las
bases de datos completas de la ronda 2021 y de todas las rondas de cada
país en versión para STATA. Se descarga la base de datos en formato
.dta. Una vez descargada y guardada en el directorio de trabajo, se
tiene que leer la base de datos como un objeto dataframe en R. El
cuestionario de esta base de datos puede ser visto en este <a
href="https://www.vanderbilt.edu/lapop/ab2018/AB2018-v12.0-Spa-190131_W.pdf">enlace</a>.</p>
<pre class="r"><code>library(rio)
peru23 = import(&quot;bases/PER_2023_LAPOP_AmericasBarometer_v1.0_w.sav&quot;)</code></pre>
<p>Desde la pag. 20 del reporte se hace una evaluación de la democracia
en la práctica. En particular, se trabaja con la variable PN4. En
general, ¿usted diría que está muy satisfecho(a), satisfecho(a),
insatisfecho(a) o muy insatisfecho(a) con la forma en que la democracia
funciona en Perú. El reporte se indica que los datos se recodifican en
una variable dicotómica. En este documento vamos a trabajar con la
variable original. Esta variable es una variable categórica, ordinal o
de factor. En el Gráfico 1.14 del reporte se presenta una evaluación de
la satisfacción con la democracia por variables demográficas y
socioeconómica, como nivel educativo, quintiles de riqueza, lugar de
residencia, género o grupos de edad. Es decir, se usa la satisfacción
con la democracia como variable dependiente y a cada variable
demográficas y socioeconómica como variables independientes.</p>
<p>Por ejemplo, se reporta que entre los hombres, el 42.3% están
satisfechos con la democracia, mientras que entre las mujeres, este
porcentaje disminuye a 36.9%.</p>
<p>Antes de proceder, tenemos que recodificar las variables, ponerlas en
forma de factor y etiquetar.</p>
<pre class="r"><code>library(tidyverse)
peru23 = peru23 |&gt;
  mutate(sexo = factor(q1tc_r, labels=c(&quot;Hombre&quot;, &quot;Mujer&quot;)))</code></pre>
<pre class="r"><code>table(peru23$sexo)</code></pre>
<pre><code>## 
## Hombre  Mujer 
##    769    761</code></pre>
<p>Lo mismo para la variable PN4 que se transforma en la variable
“satis”.</p>
<pre class="r"><code>peru23 = peru23 |&gt;
  mutate(satis = factor(pn4, labels= c(&quot;Muy satisfecho&quot;, &quot;Satisfecho&quot;, 
                                       &quot;Insatisfecho&quot;, &quot;Muy insatisfecho&quot;)))</code></pre>
<pre class="r"><code>tabla1 = table(peru23$satis)
tabla1</code></pre>
<pre><code>## 
##   Muy satisfecho       Satisfecho     Insatisfecho Muy insatisfecho 
##               58              233              944              280</code></pre>
<p>Para calcular la tabla de satisfacción con la democracia,
independiente del género de la persona, se puede calcular los
porcentajes de esta variable con el comando <code>prop.table</code>. Se
multuplica por 100 para tener el formato de porcentaje.</p>
<pre class="r"><code>tabla1 |&gt;
  prop.table()*100</code></pre>
<pre><code>## 
##   Muy satisfecho       Satisfecho     Insatisfecho Muy insatisfecho 
##         3.828383        15.379538        62.310231        18.481848</code></pre>
<p>Ahora, se puede calcular la tabla de contingencia entre satisfacción
y género. El comando <code>table</code> nos brinda las frecuencias
absolutas del cruce entre ambas variables. La variable dependiente
“satisfacción con la democracia” se ubica en las filas y la variable
independiente “sexo” en las columnas. Se verifica que las 58
observaciones que están muy satisfechas con la democracia, se dividen en
27 hombres y 29 mujeres.</p>
<pre class="r"><code>tabla2 = table(peru23$satis, peru23$sexo)
tabla2</code></pre>
<pre><code>##                   
##                    Hombre Mujer
##   Muy satisfecho       27    29
##   Satisfecho          132   101
##   Insatisfecho        456   485
##   Muy insatisfecho    148   132</code></pre>
<p>Para calcular las frecuencias relativas, se tiene que usar el comando
<code>prop.table</code>. Se agrega la especificación <code>(2)</code>
para indicar que se quiere las proporciones sobre las columnas. Se sigue
con el comando <code>round</code> para eliminar los decimales
innecesarios y finalmente se usa <code>addmargins</code> para verificar
la suma de proporciones sobre las columnas.</p>
<pre class="r"><code>tabla3 = tabla2 |&gt;
  prop.table(2)|&gt;
  round(3)*100 
tabla3</code></pre>
<pre><code>##                   
##                    Hombre Mujer
##   Muy satisfecho      3.5   3.9
##   Satisfecho         17.3  13.5
##   Insatisfecho       59.8  64.9
##   Muy insatisfecho   19.4  17.7</code></pre>
<p>En esta tabla se muestra las distribuciones condicionales de
satisfacción con la democracia por cada grupo de género. Por ejemplo, el
3.5% de los hombres se encuentras muy satisfechos con la democracia, un
porcentaje algo similar al 3.9% de las mujeres. El 17.3% de los hombres
se encuentran satisfechos con la democracia, 4 puntos porcentuales por
encima que las mujeres.</p>
<p>De esta manera, se pueden comparar los porcentajes por cada categoría
de la variable dependiente entre grupos de la variable independiente y,
además, se puede comparar con los porcentajes no condicionales de la
variable satisfacción con la democracia.</p>
<pre class="r"><code>peru23 = peru23 |&gt;
  mutate(protesta = factor(prot3, labels= c(&quot;Sí ha participado&quot;, 
                                            &quot;No ha participado&quot;)))</code></pre>
<pre class="r"><code>tabla4 = table(peru23$protesta, peru23$sexo)
tabla4 = tabla4 |&gt;
  prop.table(2)|&gt;
  round(3)*100
tabla4</code></pre>
<pre><code>##                    
##                     Hombre Mujer
##   Sí ha participado   13.3  10.2
##   No ha participado   86.7  89.8</code></pre>
<pre class="r"><code>prueba2 = chisq.test(peru23$protesta, peru23$sexo)
prueba2</code></pre>
<pre><code>## 
##  Pearson&#39;s Chi-squared test with Yates&#39; continuity correction
## 
## data:  peru23$protesta and peru23$sexo
## X-squared = 3.0967, df = 1, p-value = 0.07845</code></pre>
<pre class="r"><code>peru23 = peru23 |&gt;
  mutate(urbano = factor(ur, labels= c(&quot;Urbano&quot;, &quot;Rural&quot;)))</code></pre>
<pre class="r"><code>tabla5 = table(peru23$protesta, peru23$urbano)
tabla5 = tabla5 |&gt;
  prop.table(2)|&gt;
  round(3)*100
tabla5</code></pre>
<pre><code>##                    
##                     Urbano Rural
##   Sí ha participado   10.4  16.1
##   No ha participado   89.6  83.9</code></pre>
<pre class="r"><code>prueba3 = chisq.test(peru23$protesta, peru23$urbano)
prueba3</code></pre>
<pre><code>## 
##  Pearson&#39;s Chi-squared test with Yates&#39; continuity correction
## 
## data:  peru23$protesta and peru23$urbano
## X-squared = 8.1579, df = 1, p-value = 0.004287</code></pre>
</div>
<div id="gráficos-bivariados-categóricos" class="section level1">
<h1>Gráficos bivariados categóricos</h1>
<p>Para crear un gráfico se tiene que guardar la tabla como un
dataframe. Se usa el comando <code>as.data.frame</code> para salvar los
porcentajes y poder usarlos con el comando <code>ggplot</code>. Nótese
que el dataframe guarda los porcentajes en otro formato.</p>
<pre class="r"><code>tabla4 = as.data.frame(tabla3)
tabla4</code></pre>
<pre><code>##               Var1   Var2 Freq
## 1   Muy satisfecho Hombre  3.5
## 2       Satisfecho Hombre 17.3
## 3     Insatisfecho Hombre 59.8
## 4 Muy insatisfecho Hombre 19.4
## 5   Muy satisfecho  Mujer  3.9
## 6       Satisfecho  Mujer 13.5
## 7     Insatisfecho  Mujer 64.9
## 8 Muy insatisfecho  Mujer 17.7</code></pre>
<p>En este caso, como tenemos 4 categorías para satisfacción con la
democracia y otras 2 para sexo, un gráfico de barras separadas crearía 8
barras.</p>
<pre class="r"><code>library(ggplot2)
ggplot(data=tabla4, aes(x=Var1, y=Freq, fill=Var2))+
  geom_bar(position = &quot;dodge&quot;, stat=&quot;identity&quot;)+
  geom_text(aes(label=paste(Freq, &quot;%&quot;, sep=&quot;&quot;)), 
            position = position_dodge(width = 0.9), 
            vjust=0, size = 3)+
  labs(x=&quot;Satisfacción con la democracia&quot;, y=&quot;Porcentaje&quot;, fill=&quot;Sexo&quot;)</code></pre>
<p><img src="clase7_files/figure-html/unnamed-chunk-8-1.png" width="672" /></p>
<p>Esta forma de graficar puede complicar la comparación en algunos
casos. Por eso, en otros casos, se prefiere el tipo de barras
apiladas.</p>
<pre class="r"><code>ggplot(data=tabla4, aes(x=Var2, y=Freq, fill=Var1))+
  geom_bar(position=&quot;stack&quot;, stat=&quot;identity&quot;)+
  geom_text(aes(label=paste(Freq, &quot;%&quot;, sep=&quot;&quot;)), 
            position = position_stack(), vjust=1, size = 3)+
  labs(x=&quot;Sexo&quot;, y=&quot;Porcentaje&quot;, fill=&quot;Satisfacción con la democracia&quot;)</code></pre>
<p><img src="clase7_files/figure-html/barrapiladased-1.png" width="672" /></p>
</div>
<div id="independencia-y-dependencia" class="section level1">
<h1>Independencia y dependencia</h1>
<p>Decimos que dos variables categóricas son
<strong><em>estadísticamente independientes</em></strong> si las
distribuciones condicionales (poblacionales) son idénticas por cada
categoría de la variable independiente. Por ejemplo, la siguiente tabla,
si mostrara los porcentajes poblacionales condicionales, estos son
idénticos entre grupos de la variable independiente. Es decir,
independientemente de ser hombre o mujer, las distribución de
satisfacción por la democracia es la misma. Ser hombre o mujer no cambia
nada las opiniones con respecto a la satisfacción con la democracia.</p>
<table>
<thead>
<tr class="header">
<th>Satisfacción con la democracia</th>
<th align="center">Hombre</th>
<th align="center">Mujer</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Muy satisfecho</td>
<td align="center">3.5%</td>
<td align="center">3.9%</td>
</tr>
<tr class="even">
<td>Satisfecho</td>
<td align="center">17.3%</td>
<td align="center">13.5%</td>
</tr>
<tr class="odd">
<td>Insatisfecho</td>
<td align="center">59.8%</td>
<td align="center">64.9%</td>
</tr>
<tr class="even">
<td>Muy insatisfecho</td>
<td align="center">19.4%</td>
<td align="center">17.7%</td>
</tr>
</tbody>
</table>
<p>VI: fuma ———&gt; VD: cáncer de pulmón</p>
<table>
<thead>
<tr class="header">
<th></th>
<th>Fuma</th>
<th></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Cáncer al pulmón</td>
<td>Fumador</td>
<td>No fumador</td>
</tr>
<tr class="even">
<td>Si desarrolla cáncer</td>
<td>10</td>
<td>10</td>
</tr>
<tr class="odd">
<td>No desarrolla cáncer</td>
<td>90</td>
<td>90</td>
</tr>
<tr class="even">
<td>Total</td>
<td>100%</td>
<td>100%</td>
</tr>
</tbody>
</table>
<p>A medida que estos porcentajes difieren más entre sí, hay más
probabilidades que ambas variables estén relacionadas. En realidad, a
medida que estos porcentajes difieren más de la distribución no
condicional de la variable satisfacción con la democracia también habría
una mayor probabilidad de que estén relacionadas.</p>
</div>
<div id="prueba-de-independencia-de-chi-cuadrado"
class="section level1">
<h1>Prueba de independencia de chi-cuadrado</h1>
<p>Se basa en la comparación de las frecuencias observadas (las
observaciones que se recoge en campo) versus las frecuencias esperadas
(las observaciones que debería haber en cada celda de la tabla si las
variables fueran independientes). En ese sentido <span
class="math inline">\(H_0: f_e = f_o\)</span> o lo que es lo mismo que
las variables son independientes.</p>
<p>Si no hubiera relación entre las variables, tendríamos los mismo
porcentajes reproducidos en las distribuciones condicionales.</p>
<table style="width:99%;">
<colgroup>
<col width="5%" />
<col width="46%" />
<col width="47%" />
</colgroup>
<thead>
<tr class="header">
<th>Col1</th>
<th>Hombres</th>
<th>Mujeres</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>MS</td>
<td><p>2.1% de hombres -&gt; #observaciones si no hay relación</p>
<p>cuánto es el 2.1% de 1617 = 34 -&gt; #obs si NO hubiera relación</p>
<p>Pero, 19 es lo realmente observado</p>
<p>(19-34)^2</p></td>
<td><p>2.1% de mujeres -&gt; #observaciones si no hay relación</p>
<p>cuánto es el 2.1% de 1421 = 29.8 -&gt; #obs si NO hubiera
relación</p>
<p>Pero, 12 es lo realmente observado</p>
<p>(12-29.8)^2</p></td>
</tr>
<tr class="even">
<td>S</td>
<td>18.6%</td>
<td>18.6%</td>
</tr>
<tr class="odd">
<td>I</td>
<td>61.3%</td>
<td>61.3%</td>
</tr>
<tr class="even">
<td>MI</td>
<td>18%</td>
<td>18%</td>
</tr>
<tr class="odd">
<td></td>
<td>100%</td>
<td>100%</td>
</tr>
</tbody>
</table>
</div>
<div id="prueba-estadística" class="section level1">
<h1>Prueba estadística</h1>
<p>El chi-cuadrado resume qué tan cerca están las frecuencias esperadas
de las frecuencias observadas. Mientras más pequeña la distancia en cada
celda, menos probabilidades de rechazar la hipótesis nula. Mientras la
distancia más grande en cada celda ,más probabilidades de rechazar la
hipótesis nula.</p>
<p><span class="math display">\[
\chi^2 = \sum\frac{(f_o-f_e)^2}{f_e}
\]</span></p>
<ul>
<li><p>Si fo=fe en cada celda, entonces χ^2 = 0</p></li>
<li><p>Con el valor de <span class="math inline">\(\chi^2\)</span> se
calcula un p-value, que tiene que ser menor de 0.05 para rechazar la
Ho.</p></li>
<li><p>Se requiere que haya al menos 5 observaciones en cada
celda</p></li>
</ul>
<p>En R se usa el comando <code>chisq.test</code> para calcular el
estadístico y el p-value. Esta prueba es mejor guardarla en un objeto
nuevo</p>
<pre class="r"><code>prueba = chisq.test(peru23$satis, peru23$sexo)</code></pre>
<p>La primera tabla presenta las frecuencias observadas, que es lo que
realmente se recoge en campo. La segunda tabla presenta las frecuencias
esperadas (si no hubiera relación). Se comprueba los cálculos que se
hizo en la tabla anterior (las diferencias son debido a la aproximación
decimal).</p>
<p>El estadístico <span class="math inline">\(\chi^2\)</span> resume las
diferencias entre las frecuencias observadas y esperadas en cada celda y
las suma de acuerdo a la fórmula.</p>
<pre class="r"><code>prueba</code></pre>
<pre><code>## 
##  Pearson&#39;s Chi-squared test
## 
## data:  peru23$satis and peru23$sexo
## X-squared = 5.835, df = 3, p-value = 0.1199</code></pre>
<p>La prueba nos da como resultado un p-value = 0.12, por lo que NO se
puede rechazar la hipótesis nula y se concluye que no sabemos si existe
asociación/relación/dependencia entre las variables.</p>
</div>
<div
id="tabla-cruzada-de-satisfacción-con-la-democracia-según-nivel-educativo"
class="section level1">
<h1>Tabla cruzada de satisfacción con la democracia según nivel
educativo</h1>
<p>El Gráfico 1.14 del reporte muestra los datos de satisfacción con la
democracia (según la variable recodificada dummy) por niveles educativo.
Como segundo ejemplo, aquí vamos a replicar esa relación usando la
variable original de tipo factor para Perú 2023.</p>
<p>Vamos a recodificar la variable educación. La variable original
“edre” separa los niveles educativos en 7 niveles (del 0 al 6). Los
analfabetos son un grupo muy pequeño y podrían causar problemas.</p>
<p>Primero, creamos una variable “educ”, como el factor de “edre”.
Luego, se etiqueta.</p>
<pre class="r"><code>peru23 = peru23 |&gt;
  mutate(educ = factor(edre, labels=c(&quot;Analfabeto&quot;, &quot;Primaria incompleta&quot;, 
                                      &quot;Primaria completa&quot;,&quot;Secundaria incompleta&quot;,
                                      &quot;Secundaria completa&quot;,
                                      &quot;Universitaria o técnica incompleta&quot;, 
                                      &quot;Universitaria o técnica completa&quot;)))
table(peru23$educ)</code></pre>
<pre><code>## 
##                         Analfabeto                Primaria incompleta 
##                                  8                                 80 
##                  Primaria completa              Secundaria incompleta 
##                                 90                                133 
##                Secundaria completa Universitaria o técnica incompleta 
##                                511                                270 
##   Universitaria o técnica completa 
##                                443</code></pre>
<p>Vamos a crear otra variable de educación “educ2” que junte categorías
para que no hayan 7 niveles educativos.</p>
<pre class="r"><code>peru23 = peru23 |&gt;
    mutate(educ2= case_when(
    edre == 0 ~ 1,
    edre == 1 ~ 1,
    edre == 2 ~ 1,
    edre == 3 ~ 2,
    edre == 4 ~ 2,
    edre == 5 ~ 3,
    edre == 6 ~ 4,
    ))</code></pre>
<pre class="r"><code>peru23 = peru23 |&gt;
  mutate(educ2 = factor(educ2, labels=c(&quot;Hasta primaria &quot;, &quot;Hasta secundaria&quot;,
                                      &quot;Universitaria o técnica incompleta&quot;, 
                                      &quot;Universitaria o técnica completa&quot;)))
table(peru23$educ2)</code></pre>
<pre><code>## 
##                    Hasta primaria                    Hasta secundaria 
##                                178                                644 
## Universitaria o técnica incompleta   Universitaria o técnica completa 
##                                270                                443</code></pre>
<p>Con la variable recodificada se puede calcular la tabla cruzada de
satisfacción con la democracia según niveles educativos.</p>
<pre class="r"><code>tabla4 = table(peru23$satis, peru23$educ2)
tabla4</code></pre>
<pre><code>##                   
##                    Hasta primaria  Hasta secundaria
##   Muy satisfecho                23               25
##   Satisfecho                    20              112
##   Insatisfecho                  88              405
##   Muy insatisfecho              36               94
##                   
##                    Universitaria o técnica incompleta
##   Muy satisfecho                                    3
##   Satisfecho                                       38
##   Insatisfecho                                    180
##   Muy insatisfecho                                 49
##                   
##                    Universitaria o técnica completa
##   Muy satisfecho                                  7
##   Satisfecho                                     63
##   Insatisfecho                                  271
##   Muy insatisfecho                              101</code></pre>
<pre class="r"><code>tabla4 = tabla4 |&gt;
  prop.table(2) |&gt;
  round(3)*100
tabla4</code></pre>
<pre><code>##                   
##                    Hasta primaria  Hasta secundaria
##   Muy satisfecho              13.8              3.9
##   Satisfecho                  12.0             17.6
##   Insatisfecho                52.7             63.7
##   Muy insatisfecho            21.6             14.8
##                   
##                    Universitaria o técnica incompleta
##   Muy satisfecho                                  1.1
##   Satisfecho                                     14.1
##   Insatisfecho                                   66.7
##   Muy insatisfecho                               18.1
##                   
##                    Universitaria o técnica completa
##   Muy satisfecho                                1.6
##   Satisfecho                                   14.3
##   Insatisfecho                                 61.3
##   Muy insatisfecho                             22.9</code></pre>
</div>
<div
id="gráfico-bivariado-de-satisfacción-con-la-democracia-según-educación"
class="section level1">
<h1>Gráfico bivariado de satisfacción con la democracia según
educación</h1>
<pre class="r"><code>tabla5 = as.data.frame(tabla4)
tabla5</code></pre>
<pre><code>##                Var1                               Var2 Freq
## 1    Muy satisfecho                    Hasta primaria  13.8
## 2        Satisfecho                    Hasta primaria  12.0
## 3      Insatisfecho                    Hasta primaria  52.7
## 4  Muy insatisfecho                    Hasta primaria  21.6
## 5    Muy satisfecho                   Hasta secundaria  3.9
## 6        Satisfecho                   Hasta secundaria 17.6
## 7      Insatisfecho                   Hasta secundaria 63.7
## 8  Muy insatisfecho                   Hasta secundaria 14.8
## 9    Muy satisfecho Universitaria o técnica incompleta  1.1
## 10       Satisfecho Universitaria o técnica incompleta 14.1
## 11     Insatisfecho Universitaria o técnica incompleta 66.7
## 12 Muy insatisfecho Universitaria o técnica incompleta 18.1
## 13   Muy satisfecho   Universitaria o técnica completa  1.6
## 14       Satisfecho   Universitaria o técnica completa 14.3
## 15     Insatisfecho   Universitaria o técnica completa 61.3
## 16 Muy insatisfecho   Universitaria o técnica completa 22.9</code></pre>
<pre class="r"><code>ggplot(data=tabla5, aes(x=Var2, y=Freq, fill=Var1))+
  geom_bar(position=&quot;stack&quot;, stat=&quot;identity&quot;)+
  geom_text(aes(label=paste(Freq, &quot;%&quot;, sep=&quot;&quot;)), 
            position = position_stack(), vjust=1, size = 3)+
  labs(x=&quot;Nivel educativo&quot;, y=&quot;Porcentaje&quot;, 
       fill=&quot;Satisfacción con la democracia&quot;)</code></pre>
<p><img src="clase7_files/figure-html/unnamed-chunk-14-1.png" width="672" /></p>
</div>
<div
id="prueba-estadística-entre-satisfacción-con-la-democracia-según-educación"
class="section level1">
<h1>Prueba estadística entre satisfacción con la democracia según
educación</h1>
<p>Para comprobar la relación entre estas variables, también se puede
usar la prueba de independencia de <span
class="math inline">\(\chi^2\)</span>. Esta evaluación se guarda en un
objeto “prueba2”.</p>
<pre class="r"><code>prueba2 = chisq.test(peru23$satis, peru23$educ2)
prueba2</code></pre>
<pre><code>## 
##  Pearson&#39;s Chi-squared test
## 
## data:  peru23$satis and peru23$educ2
## X-squared = 71.87, df = 9, p-value = 6.539e-12</code></pre>
<pre class="r"><code>prueba2 = chisq.test(peru23$satis, peru23$educ2)
prueba2</code></pre>
<pre><code>## 
##  Pearson&#39;s Chi-squared test
## 
## data:  peru23$satis and peru23$educ2
## X-squared = 71.87, df = 9, p-value = 6.539e-12</code></pre>
<p>Con el valor de estadístico se obtiene un p-value menor a 0.05, con
lo que se rechaza la hipótesis nula y se afirma que las frecuencias
observadas son diferentes de las esperadas, con lo que concluimos que sí
existe una relación de dependencia entre las variables. Esto quiere
decir que en Perú en 2023 existen diferencias en la satisfacción con la
democracia entre diferentes grupos por nivel educativo.</p>
</div>

<div id="rmd-source-code">LS0tCnRpdGxlOiAiQ2xhc2UgMTAgeSAxMSIKYXV0aG9yOiAiQXJ0dXJvIE1hbGRvbmFkbyIKZGF0ZTogIjIxLTI4LzA1LzIwMjQiCm91dHB1dDoKICBodG1sX2RvY3VtZW50OgogICAgdG9jOiB0cnVlCiAgICB0b2NfZmxvYXQ6IHRydWUKICAgIGNvbGxhcHNlZDogZmFsc2UKICAgIG51bWJlcl9zZWN0aW9uczogZmFsc2UKICAgIHRvY19kZXB0aDogMQogICAgY29kZV9kb3dubG9hZDogdHJ1ZQogICAgdGhlbWU6IGNvc21vCiAgICBoaWdobGlnaHQ6IHRleHRtYXRlCmVkaXRvcl9vcHRpb25zOgogIG1hcmtkb3duOgogICAgd3JhcDogc2VudGVuY2UKYmlibGlvZ3JhcGh5OiByZWZlcmVuY2VzLmJpYgotLS0KCmBgYHtyIHNldHVwLCBpbmNsdWRlPUZBTFNFfQprbml0cjo6b3B0c19jaHVuayRzZXQoZWNobyA9IFRSVUUpCmBgYAoKIyBJbnRyb2R1Y2Npw7NuCgpMYSBwcnVlYmEgdCB5IGxhIHBydWViYSBkZSBBTk9WQSBhbmFsaXphIGVsIGltcGFjdG8gZGUgdW5hIHZhcmlhYmxlIGluZGVwZW5kaWVudGUgY2F0ZWfDs3JpY2EgZW4gdW5hIHZhcmlhYmxlIGRlcGVuZGllbnRlIG51bcOpcmljYS4KRWwgcGFzbyBxdWUgdmFtb3MgYSBkYXIgZW4gZXN0YSBzZWNjacOzbiBlcyBhbmFsaXphciBsYSAqKnJlbGFjacOzbiBiaXZhcmlhZGEgZW50cmUgZG9zIHZhcmlhYmxlcyBkZSBmYWN0b3IgKG8gY2F0ZWfDs3JpY2FzKSoqLgpFc3RhIGV2YWx1YWNpw7NuIHNlIHJlYWxpemEgbWVkaWFudGUgbGEgcHJ1ZWJhIGRlIGNoaS1jdWFkcmFkby4KCi0gICBDaGktY3VhZHJhZG86CgogICAgLSAgIFZhcmlhYmxlIGluZGVwZW5kaWVudGUgKHBhw61zKSAtXD4gVmFyaWFibGUgZGVwZW5kaWVudGUgKGFwb3lvIGEgbGEgZGVtb2NyYWNpYSkuCgogICAgLSAgIFZhcmlhYmxlIGluZGVwZW5kaWVudGUgKHNpdHVhY2nDs24gZWNvbsOzbWljYSkgLVw+IFZhcmlhYmxlIGRlcGVuZGllbnRlIChzYXRpc2ZhY2Npw7NuIGNvbiBsYSB2aWRhKQoKICAgIC0gICBWYXJpYWJsZSBpbmRlcGVuZGllbnRlKG5pdmVsIGVkdWNhdGl2bykgLVw+IFZhcmlhYmxlIGRlcGVuZGllbnRlIChzYXRpc2ZhY2Npw7NuIGNvbiBsYSBkZW1vY3JhY2lhKQoKIyBUYWJsYXMgZGUgY29udGluZ2VuY2lhCgpTZSB0cmF0YSBkZSB0YWJsYXMgZGUgZG9ibGUgZW50cmFkYSAoY29tbyBtw61uaW1vKSBwYXJhIGFuYWxpemFyIGxvcyBkYXRvcyBkZSB2YXJpYWJsZXMgY2F0ZWfDs3JpY2FzLgpVbmEgdmFyaWFibGUgdmEgZW4gbGFzIGZpbGFzIHkgb3RyYSBlbiBsYXMgY29sdW1uYXMuClNlIHB1ZWRlIHRlbmVyIGxvcyB0b3RhbGVzIHBvciBmaWxhcyBvIHBvciBjb2x1bW5hcywgcXVlIHNlIGxsYW1hbiAiZGlzdHJpYnVjaW9uZXMgbWFyZ2luYWxlcyIgeSBxdWUgY29pbmNpZGVuIGNvbiBsYSBkaXN0cmlidWNpw7NuIGRlIGxhIHZhcmlhYmxlIGluZGl2aWR1YWwuCgpTZSBwdWVkZSBjYWxjdWxhciBwb3JjZW50YWplcyBkZSAzIG1hbmVyYXM6CgotICAgUG9yY2VudGFqZXMgcG9yIGZpbGFzCgotICAgUG9yY2VudGFqZXMgcG9yIGNvbHVtbmFzCgotICAgUG9yY2VudGFqZSBzb2JyZSBlbCB0b3RhbAoKU2UgcmVjb21pZW5kYSBxdWUgbGEgdmFyaWFibGUgaW5kZXBlbmRpZW50ZSBzZWEgY29sb2NhZGEgZW4gbGFzIGNvbHVtbmFzIHkgbGEgdmFyaWFibGUgZGVwZW5kaWVudGUgZW4gbGFzIGZpbGFzLgpTaSBzZSBjYWxjdWxhIGxvcyBwb3JjZW50YWplcyBwb3IgY29sdW1uYXMgZGUgZXN0YSBtYW5lcmEsIHNlIHBvZHLDoSBjb21wYXJhciBsYXMgZGlzdHJpYnVjaW9uZXMgY29uZGljaW9uYWxlcyBkZSBsYSB2YXJpYWJsZSBkZXBlbmRpZW50ZSBwb3IgY2FkYSBncnVwbyBkZSBsYSB2YXJpYWJsZSBpbmRlcGVuZGllbnRlLgoKRW4gZXN0ZSBkb2N1bWVudG8gdmFtb3MgYSB0cmFiYWphciBjb24gZWwgcmVwb3J0ZSBjb21wYXJhZG8gKkVsIFB1bHNvIGRlIGxhIERlbW9jcmFjaWEqLCBkaXNwb25pYmxlIFthcXXDrV0oaHR0cHM6Ly93d3cudmFuZGVyYmlsdC5lZHUvbGFwb3AvYWIyMDE4LzIwMTgtMTlfQW1lcmljYXNCYXJvbWV0ZXJfUmVnaW9uYWxfUmVwb3J0X1NwYW5pc2hfV18wMy4yNy4yMC5wZGYpLgpFc3RlIHJlcG9ydGUgcHJlc2VudGEgbG9zIHByaW5jaXBhbGVzIGhhbGxhemdvcyBkZWwgcHJveWVjdG8gZGVsIEJhcsOzbWV0cm8gZGUgbGFzIEFtw6lyaWNhcywgb3JnYW5pemFkbyBwb3IgZWwgUHJveWVjdG8gZGUgT3BpbmnDs24gUMO6YmxpY2EgZW4gQW3DqXJpY2EgTGF0aW5hIChbTEFQT1BdKGh0dHBzOi8vd3d3LnZhbmRlcmJpbHQuZWR1L2xhcG9wLyksIHBvciBzdXMgc2lnbGFzIGVuIGluZ2zDqXMpLgpFbiBlc3RlIGRvY3VtZW50byBzZSByZXBvcnRhbiBsb3MgcmVzdWx0YWRvcyBkZSBsYSDDumx0aW1hIHJvbmRhIGRpc3BvbmlibGUgZGUgMjAyMy4KClB1ZWRlbiBkZXNjYXJnYXIgbG9zIGRhdG9zIGRlIG1hbmVyYSBsaWJyZSBbYXF1w61dKCU1Qmh0dHA6Ly9kYXRhc2V0cy5hbWVyaWNhc2Jhcm9tZXRlci5vcmcvZGF0YWJhc2UvbG9naW4ucGhwKS5dKDxodHRwOi8vZGF0YXNldHMuYW1lcmljYXNiYXJvbWV0ZXIub3JnL2RhdGFiYXNlL2xvZ2luLnBocD4pLikgRW4gZXN0ZSBlbmxhY2UsIHNlIHB1ZWRlbiByZWdpc3RyYXIgbyBlbnRyYXIgY29tbyAiRnJlZSBVc2VyIi4KRW4gZWwgYnVzY2Fkb3IsIHNlIHB1ZWRlIGluZ3Jlc2FyIGVsIHRleHRvICIyMDIzIi4KQWjDrSBzZSB0ZW5kcsOhIGFjY2VzbyBhIGxhcyBiYXNlcyBkZSBkYXRvcyBjb21wbGV0YXMgZGUgbGEgcm9uZGEgMjAyMSB5IGRlIHRvZGFzIGxhcyByb25kYXMgZGUgY2FkYSBwYcOtcyBlbiB2ZXJzacOzbiBwYXJhIFNUQVRBLgpTZSBkZXNjYXJnYSBsYSBiYXNlIGRlIGRhdG9zIGVuIGZvcm1hdG8gLmR0YS4KVW5hIHZleiBkZXNjYXJnYWRhIHkgZ3VhcmRhZGEgZW4gZWwgZGlyZWN0b3JpbyBkZSB0cmFiYWpvLCBzZSB0aWVuZSBxdWUgbGVlciBsYSBiYXNlIGRlIGRhdG9zIGNvbW8gdW4gb2JqZXRvIGRhdGFmcmFtZSBlbiBSLgpFbCBjdWVzdGlvbmFyaW8gZGUgZXN0YSBiYXNlIGRlIGRhdG9zIHB1ZWRlIHNlciB2aXN0byBlbiBlc3RlIFtlbmxhY2VdKGh0dHBzOi8vd3d3LnZhbmRlcmJpbHQuZWR1L2xhcG9wL2FiMjAxOC9BQjIwMTgtdjEyLjAtU3BhLTE5MDEzMV9XLnBkZikuCgpgYGB7ciBiYXNlfQpsaWJyYXJ5KHJpbykKcGVydTIzID0gaW1wb3J0KCJiYXNlcy9QRVJfMjAyM19MQVBPUF9BbWVyaWNhc0Jhcm9tZXRlcl92MS4wX3cuc2F2IikKYGBgCgpEZXNkZSBsYSBwYWcuCjIwIGRlbCByZXBvcnRlIHNlIGhhY2UgdW5hIGV2YWx1YWNpw7NuIGRlIGxhIGRlbW9jcmFjaWEgZW4gbGEgcHLDoWN0aWNhLgpFbiBwYXJ0aWN1bGFyLCBzZSB0cmFiYWphIGNvbiBsYSB2YXJpYWJsZSBQTjQuCkVuIGdlbmVyYWwsIMK/dXN0ZWQgZGlyw61hIHF1ZSBlc3TDoSBtdXkgc2F0aXNmZWNobyhhKSwgc2F0aXNmZWNobyhhKSwgaW5zYXRpc2ZlY2hvKGEpIG8gbXV5IGluc2F0aXNmZWNobyhhKSBjb24gbGEgZm9ybWEgZW4gcXVlIGxhIGRlbW9jcmFjaWEgZnVuY2lvbmEgZW4gUGVyw7ouCkVsIHJlcG9ydGUgc2UgaW5kaWNhIHF1ZSBsb3MgZGF0b3Mgc2UgcmVjb2RpZmljYW4gZW4gdW5hIHZhcmlhYmxlIGRpY290w7NtaWNhLgpFbiBlc3RlIGRvY3VtZW50byB2YW1vcyBhIHRyYWJhamFyIGNvbiBsYSB2YXJpYWJsZSBvcmlnaW5hbC4KRXN0YSB2YXJpYWJsZSBlcyB1bmEgdmFyaWFibGUgY2F0ZWfDs3JpY2EsIG9yZGluYWwgbyBkZSBmYWN0b3IuCkVuIGVsIEdyw6FmaWNvIDEuMTQgZGVsIHJlcG9ydGUgc2UgcHJlc2VudGEgdW5hIGV2YWx1YWNpw7NuIGRlIGxhIHNhdGlzZmFjY2nDs24gY29uIGxhIGRlbW9jcmFjaWEgcG9yIHZhcmlhYmxlcyBkZW1vZ3LDoWZpY2FzIHkgc29jaW9lY29uw7NtaWNhLCBjb21vIG5pdmVsIGVkdWNhdGl2bywgcXVpbnRpbGVzIGRlIHJpcXVlemEsIGx1Z2FyIGRlIHJlc2lkZW5jaWEsIGfDqW5lcm8gbyBncnVwb3MgZGUgZWRhZC4KRXMgZGVjaXIsIHNlIHVzYSBsYSBzYXRpc2ZhY2Npw7NuIGNvbiBsYSBkZW1vY3JhY2lhIGNvbW8gdmFyaWFibGUgZGVwZW5kaWVudGUgeSBhIGNhZGEgdmFyaWFibGUgZGVtb2dyw6FmaWNhcyB5IHNvY2lvZWNvbsOzbWljYSBjb21vIHZhcmlhYmxlcyBpbmRlcGVuZGllbnRlcy4KClBvciBlamVtcGxvLCBzZSByZXBvcnRhIHF1ZSBlbnRyZSBsb3MgaG9tYnJlcywgZWwgNDIuMyUgZXN0w6FuIHNhdGlzZmVjaG9zIGNvbiBsYSBkZW1vY3JhY2lhLCBtaWVudHJhcyBxdWUgZW50cmUgbGFzIG11amVyZXMsIGVzdGUgcG9yY2VudGFqZSBkaXNtaW51eWUgYSAzNi45JS4KCkFudGVzIGRlIHByb2NlZGVyLCB0ZW5lbW9zIHF1ZSByZWNvZGlmaWNhciBsYXMgdmFyaWFibGVzLCBwb25lcmxhcyBlbiBmb3JtYSBkZSBmYWN0b3IgeSBldGlxdWV0YXIuCgpgYGB7ciByZWNvMH0KbGlicmFyeSh0aWR5dmVyc2UpCnBlcnUyMyA9IHBlcnUyMyB8PgogIG11dGF0ZShzZXhvID0gZmFjdG9yKHExdGNfciwgbGFiZWxzPWMoIkhvbWJyZSIsICJNdWplciIpKSkKYGBgCgpgYGB7ciByZWNvMX0KdGFibGUocGVydTIzJHNleG8pCmBgYAoKTG8gbWlzbW8gcGFyYSBsYSB2YXJpYWJsZSBQTjQgcXVlIHNlIHRyYW5zZm9ybWEgZW4gbGEgdmFyaWFibGUgInNhdGlzIi4KCmBgYHtyIHJlY28yfQpwZXJ1MjMgPSBwZXJ1MjMgfD4KICBtdXRhdGUoc2F0aXMgPSBmYWN0b3IocG40LCBsYWJlbHM9IGMoIk11eSBzYXRpc2ZlY2hvIiwgIlNhdGlzZmVjaG8iLCAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIkluc2F0aXNmZWNobyIsICJNdXkgaW5zYXRpc2ZlY2hvIikpKQpgYGAKCmBgYHtyfQp0YWJsYTEgPSB0YWJsZShwZXJ1MjMkc2F0aXMpCnRhYmxhMQpgYGAKClBhcmEgY2FsY3VsYXIgbGEgdGFibGEgZGUgc2F0aXNmYWNjacOzbiBjb24gbGEgZGVtb2NyYWNpYSwgaW5kZXBlbmRpZW50ZSBkZWwgZ8OpbmVybyBkZSBsYSBwZXJzb25hLCBzZSBwdWVkZSBjYWxjdWxhciBsb3MgcG9yY2VudGFqZXMgZGUgZXN0YSB2YXJpYWJsZSBjb24gZWwgY29tYW5kbyBgcHJvcC50YWJsZWAuClNlIG11bHR1cGxpY2EgcG9yIDEwMCBwYXJhIHRlbmVyIGVsIGZvcm1hdG8gZGUgcG9yY2VudGFqZS4KCmBgYHtyIHNhdGlzcG9yY30KdGFibGExIHw+CiAgcHJvcC50YWJsZSgpKjEwMApgYGAKCkFob3JhLCBzZSBwdWVkZSBjYWxjdWxhciBsYSB0YWJsYSBkZSBjb250aW5nZW5jaWEgZW50cmUgc2F0aXNmYWNjacOzbiB5IGfDqW5lcm8uCkVsIGNvbWFuZG8gYHRhYmxlYCBub3MgYnJpbmRhIGxhcyBmcmVjdWVuY2lhcyBhYnNvbHV0YXMgZGVsIGNydWNlIGVudHJlIGFtYmFzIHZhcmlhYmxlcy4KTGEgdmFyaWFibGUgZGVwZW5kaWVudGUgInNhdGlzZmFjY2nDs24gY29uIGxhIGRlbW9jcmFjaWEiIHNlIHViaWNhIGVuIGxhcyBmaWxhcyB5IGxhIHZhcmlhYmxlIGluZGVwZW5kaWVudGUgInNleG8iIGVuIGxhcyBjb2x1bW5hcy4KU2UgdmVyaWZpY2EgcXVlIGxhcyA1OCBvYnNlcnZhY2lvbmVzIHF1ZSBlc3TDoW4gbXV5IHNhdGlzZmVjaGFzIGNvbiBsYSBkZW1vY3JhY2lhLCBzZSBkaXZpZGVuIGVuIDI3IGhvbWJyZXMgeSAyOSBtdWplcmVzLgoKYGBge3IgdGFibGF9CnRhYmxhMiA9IHRhYmxlKHBlcnUyMyRzYXRpcywgcGVydTIzJHNleG8pCnRhYmxhMgpgYGAKClBhcmEgY2FsY3VsYXIgbGFzIGZyZWN1ZW5jaWFzIHJlbGF0aXZhcywgc2UgdGllbmUgcXVlIHVzYXIgZWwgY29tYW5kbyBgcHJvcC50YWJsZWAuClNlIGFncmVnYSBsYSBlc3BlY2lmaWNhY2nDs24gYCgyKWAgcGFyYSBpbmRpY2FyIHF1ZSBzZSBxdWllcmUgbGFzIHByb3BvcmNpb25lcyBzb2JyZSBsYXMgY29sdW1uYXMuClNlIHNpZ3VlIGNvbiBlbCBjb21hbmRvIGByb3VuZGAgcGFyYSBlbGltaW5hciBsb3MgZGVjaW1hbGVzIGlubmVjZXNhcmlvcyB5IGZpbmFsbWVudGUgc2UgdXNhIGBhZGRtYXJnaW5zYCBwYXJhIHZlcmlmaWNhciBsYSBzdW1hIGRlIHByb3BvcmNpb25lcyBzb2JyZSBsYXMgY29sdW1uYXMuCgpgYGB7ciB0YWJsYTF9CnRhYmxhMyA9IHRhYmxhMiB8PgogIHByb3AudGFibGUoMil8PgogIHJvdW5kKDMpKjEwMCAKdGFibGEzCmBgYAoKRW4gZXN0YSB0YWJsYSBzZSBtdWVzdHJhIGxhcyBkaXN0cmlidWNpb25lcyBjb25kaWNpb25hbGVzIGRlIHNhdGlzZmFjY2nDs24gY29uIGxhIGRlbW9jcmFjaWEgcG9yIGNhZGEgZ3J1cG8gZGUgZ8OpbmVyby4KUG9yIGVqZW1wbG8sIGVsIDMuNSUgZGUgbG9zIGhvbWJyZXMgc2UgZW5jdWVudHJhcyBtdXkgc2F0aXNmZWNob3MgY29uIGxhIGRlbW9jcmFjaWEsIHVuIHBvcmNlbnRhamUgYWxnbyBzaW1pbGFyIGFsIDMuOSUgZGUgbGFzIG11amVyZXMuCkVsIDE3LjMlIGRlIGxvcyBob21icmVzIHNlIGVuY3VlbnRyYW4gc2F0aXNmZWNob3MgY29uIGxhIGRlbW9jcmFjaWEsIDQgcHVudG9zIHBvcmNlbnR1YWxlcyBwb3IgZW5jaW1hIHF1ZSBsYXMgbXVqZXJlcy4KCkRlIGVzdGEgbWFuZXJhLCBzZSBwdWVkZW4gY29tcGFyYXIgbG9zIHBvcmNlbnRhamVzIHBvciBjYWRhIGNhdGVnb3LDrWEgZGUgbGEgdmFyaWFibGUgZGVwZW5kaWVudGUgZW50cmUgZ3J1cG9zIGRlIGxhIHZhcmlhYmxlIGluZGVwZW5kaWVudGUgeSwgYWRlbcOhcywgc2UgcHVlZGUgY29tcGFyYXIgY29uIGxvcyBwb3JjZW50YWplcyBubyBjb25kaWNpb25hbGVzIGRlIGxhIHZhcmlhYmxlIHNhdGlzZmFjY2nDs24gY29uIGxhIGRlbW9jcmFjaWEuCgpgYGB7cn0KcGVydTIzID0gcGVydTIzIHw+CiAgbXV0YXRlKHByb3Rlc3RhID0gZmFjdG9yKHByb3QzLCBsYWJlbHM9IGMoIlPDrSBoYSBwYXJ0aWNpcGFkbyIsIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJObyBoYSBwYXJ0aWNpcGFkbyIpKSkKYGBgCgpgYGB7cn0KdGFibGE0ID0gdGFibGUocGVydTIzJHByb3Rlc3RhLCBwZXJ1MjMkc2V4bykKdGFibGE0ID0gdGFibGE0IHw+CiAgcHJvcC50YWJsZSgyKXw+CiAgcm91bmQoMykqMTAwCnRhYmxhNApgYGAKCmBgYHtyfQpwcnVlYmEyID0gY2hpc3EudGVzdChwZXJ1MjMkcHJvdGVzdGEsIHBlcnUyMyRzZXhvKQpwcnVlYmEyCmBgYAoKYGBge3J9CnBlcnUyMyA9IHBlcnUyMyB8PgogIG11dGF0ZSh1cmJhbm8gPSBmYWN0b3IodXIsIGxhYmVscz0gYygiVXJiYW5vIiwgIlJ1cmFsIikpKQpgYGAKCmBgYHtyfQp0YWJsYTUgPSB0YWJsZShwZXJ1MjMkcHJvdGVzdGEsIHBlcnUyMyR1cmJhbm8pCnRhYmxhNSA9IHRhYmxhNSB8PgogIHByb3AudGFibGUoMil8PgogIHJvdW5kKDMpKjEwMAp0YWJsYTUKYGBgCgpgYGB7cn0KcHJ1ZWJhMyA9IGNoaXNxLnRlc3QocGVydTIzJHByb3Rlc3RhLCBwZXJ1MjMkdXJiYW5vKQpwcnVlYmEzCmBgYAoKIyBHcsOhZmljb3MgYml2YXJpYWRvcyBjYXRlZ8Ozcmljb3MKClBhcmEgY3JlYXIgdW4gZ3LDoWZpY28gc2UgdGllbmUgcXVlIGd1YXJkYXIgbGEgdGFibGEgY29tbyB1biBkYXRhZnJhbWUuClNlIHVzYSBlbCBjb21hbmRvIGBhcy5kYXRhLmZyYW1lYCBwYXJhIHNhbHZhciBsb3MgcG9yY2VudGFqZXMgeSBwb2RlciB1c2FybG9zIGNvbiBlbCBjb21hbmRvIGBnZ3Bsb3RgLgpOw7N0ZXNlIHF1ZSBlbCBkYXRhZnJhbWUgZ3VhcmRhIGxvcyBwb3JjZW50YWplcyBlbiBvdHJvIGZvcm1hdG8uCgpgYGB7ciB0YWJsYTN9CnRhYmxhNCA9IGFzLmRhdGEuZnJhbWUodGFibGEzKQp0YWJsYTQKYGBgCgpFbiBlc3RlIGNhc28sIGNvbW8gdGVuZW1vcyA0IGNhdGVnb3LDrWFzIHBhcmEgc2F0aXNmYWNjacOzbiBjb24gbGEgZGVtb2NyYWNpYSB5IG90cmFzIDIgcGFyYSBzZXhvLCB1biBncsOhZmljbyBkZSBiYXJyYXMgc2VwYXJhZGFzIGNyZWFyw61hIDggYmFycmFzLgoKYGBge3J9CmxpYnJhcnkoZ2dwbG90MikKZ2dwbG90KGRhdGE9dGFibGE0LCBhZXMoeD1WYXIxLCB5PUZyZXEsIGZpbGw9VmFyMikpKwogIGdlb21fYmFyKHBvc2l0aW9uID0gImRvZGdlIiwgc3RhdD0iaWRlbnRpdHkiKSsKICBnZW9tX3RleHQoYWVzKGxhYmVsPXBhc3RlKEZyZXEsICIlIiwgc2VwPSIiKSksIAogICAgICAgICAgICBwb3NpdGlvbiA9IHBvc2l0aW9uX2RvZGdlKHdpZHRoID0gMC45KSwgCiAgICAgICAgICAgIHZqdXN0PTAsIHNpemUgPSAzKSsKICBsYWJzKHg9IlNhdGlzZmFjY2nDs24gY29uIGxhIGRlbW9jcmFjaWEiLCB5PSJQb3JjZW50YWplIiwgZmlsbD0iU2V4byIpCmBgYAoKRXN0YSBmb3JtYSBkZSBncmFmaWNhciBwdWVkZSBjb21wbGljYXIgbGEgY29tcGFyYWNpw7NuIGVuIGFsZ3Vub3MgY2Fzb3MuClBvciBlc28sIGVuIG90cm9zIGNhc29zLCBzZSBwcmVmaWVyZSBlbCB0aXBvIGRlIGJhcnJhcyBhcGlsYWRhcy4KCmBgYHtyIGJhcnJhcGlsYWRhc2VkfQpnZ3Bsb3QoZGF0YT10YWJsYTQsIGFlcyh4PVZhcjIsIHk9RnJlcSwgZmlsbD1WYXIxKSkrCiAgZ2VvbV9iYXIocG9zaXRpb249InN0YWNrIiwgc3RhdD0iaWRlbnRpdHkiKSsKICBnZW9tX3RleHQoYWVzKGxhYmVsPXBhc3RlKEZyZXEsICIlIiwgc2VwPSIiKSksIAogICAgICAgICAgICBwb3NpdGlvbiA9IHBvc2l0aW9uX3N0YWNrKCksIHZqdXN0PTEsIHNpemUgPSAzKSsKICBsYWJzKHg9IlNleG8iLCB5PSJQb3JjZW50YWplIiwgZmlsbD0iU2F0aXNmYWNjacOzbiBjb24gbGEgZGVtb2NyYWNpYSIpCmBgYAoKIyBJbmRlcGVuZGVuY2lhIHkgZGVwZW5kZW5jaWEKCkRlY2ltb3MgcXVlIGRvcyB2YXJpYWJsZXMgY2F0ZWfDs3JpY2FzIHNvbiAqKiplc3RhZMOtc3RpY2FtZW50ZSBpbmRlcGVuZGllbnRlcyoqKiBzaSBsYXMgZGlzdHJpYnVjaW9uZXMgY29uZGljaW9uYWxlcyAocG9ibGFjaW9uYWxlcykgc29uIGlkw6ludGljYXMgcG9yIGNhZGEgY2F0ZWdvcsOtYSBkZSBsYSB2YXJpYWJsZSBpbmRlcGVuZGllbnRlLgpQb3IgZWplbXBsbywgbGEgc2lndWllbnRlIHRhYmxhLCBzaSBtb3N0cmFyYSBsb3MgcG9yY2VudGFqZXMgcG9ibGFjaW9uYWxlcyBjb25kaWNpb25hbGVzLCBlc3RvcyBzb24gaWTDqW50aWNvcyBlbnRyZSBncnVwb3MgZGUgbGEgdmFyaWFibGUgaW5kZXBlbmRpZW50ZS4KRXMgZGVjaXIsIGluZGVwZW5kaWVudGVtZW50ZSBkZSBzZXIgaG9tYnJlIG8gbXVqZXIsIGxhcyBkaXN0cmlidWNpw7NuIGRlIHNhdGlzZmFjY2nDs24gcG9yIGxhIGRlbW9jcmFjaWEgZXMgbGEgbWlzbWEuClNlciBob21icmUgbyBtdWplciBubyBjYW1iaWEgbmFkYSBsYXMgb3BpbmlvbmVzIGNvbiByZXNwZWN0byBhIGxhIHNhdGlzZmFjY2nDs24gY29uIGxhIGRlbW9jcmFjaWEuCgp8IFNhdGlzZmFjY2nDs24gY29uIGxhIGRlbW9jcmFjaWEgfCBIb21icmUgfCBNdWplciB8CnwtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLXw6LS0tLS0tOnw6LS0tLS06fAp8IE11eSBzYXRpc2ZlY2hvICAgICAgICAgICAgICAgICB8ICAzLjUlICB8IDMuOSUgIHwKfCBTYXRpc2ZlY2hvICAgICAgICAgICAgICAgICAgICAgfCAxNy4zJSAgfCAxMy41JSB8CnwgSW5zYXRpc2ZlY2hvICAgICAgICAgICAgICAgICAgIHwgNTkuOCUgIHwgNjQuOSUgfAp8IE11eSBpbnNhdGlzZmVjaG8gICAgICAgICAgICAgICB8IDE5LjQlICB8IDE3LjclIHwKClZJOiBmdW1hIC0tLS0tLS0tLVw+IFZEOiBjw6FuY2VyIGRlIHB1bG3Ds24KCnwgICAgICAgICAgICAgICAgICAgICAgfCBGdW1hICAgIHwgICAgICAgICAgICB8CnwtLS0tLS0tLS0tLS0tLS0tLS0tLS0tfC0tLS0tLS0tLXwtLS0tLS0tLS0tLS18CnwgQ8OhbmNlciBhbCBwdWxtw7NuICAgICB8IEZ1bWFkb3IgfCBObyBmdW1hZG9yIHwKfCBTaSBkZXNhcnJvbGxhIGPDoW5jZXIgfCAxMCAgICAgIHwgMTAgICAgICAgICB8CnwgTm8gZGVzYXJyb2xsYSBjw6FuY2VyIHwgOTAgICAgICB8IDkwICAgICAgICAgfAp8IFRvdGFsICAgICAgICAgICAgICAgIHwgMTAwJSAgICB8IDEwMCUgICAgICAgfAoKQSBtZWRpZGEgcXVlIGVzdG9zIHBvcmNlbnRhamVzIGRpZmllcmVuIG3DoXMgZW50cmUgc8OtLCBoYXkgbcOhcyBwcm9iYWJpbGlkYWRlcyBxdWUgYW1iYXMgdmFyaWFibGVzIGVzdMOpbiByZWxhY2lvbmFkYXMuCkVuIHJlYWxpZGFkLCBhIG1lZGlkYSBxdWUgZXN0b3MgcG9yY2VudGFqZXMgZGlmaWVyZW4gbcOhcyBkZSBsYSBkaXN0cmlidWNpw7NuIG5vIGNvbmRpY2lvbmFsIGRlIGxhIHZhcmlhYmxlIHNhdGlzZmFjY2nDs24gY29uIGxhIGRlbW9jcmFjaWEgdGFtYmnDqW4gaGFicsOtYSB1bmEgbWF5b3IgcHJvYmFiaWxpZGFkIGRlIHF1ZSBlc3TDqW4gcmVsYWNpb25hZGFzLgoKIyBQcnVlYmEgZGUgaW5kZXBlbmRlbmNpYSBkZSBjaGktY3VhZHJhZG8KClNlIGJhc2EgZW4gbGEgY29tcGFyYWNpw7NuIGRlIGxhcyBmcmVjdWVuY2lhcyBvYnNlcnZhZGFzIChsYXMgb2JzZXJ2YWNpb25lcyBxdWUgc2UgcmVjb2dlIGVuIGNhbXBvKSB2ZXJzdXMgbGFzIGZyZWN1ZW5jaWFzIGVzcGVyYWRhcyAobGFzIG9ic2VydmFjaW9uZXMgcXVlIGRlYmVyw61hIGhhYmVyIGVuIGNhZGEgY2VsZGEgZGUgbGEgdGFibGEgc2kgbGFzIHZhcmlhYmxlcyBmdWVyYW4gaW5kZXBlbmRpZW50ZXMpLgpFbiBlc2Ugc2VudGlkbyAkSF8wOiBmX2UgPSBmX28kIG8gbG8gcXVlIGVzIGxvIG1pc21vIHF1ZSBsYXMgdmFyaWFibGVzIHNvbiBpbmRlcGVuZGllbnRlcy4KClNpIG5vIGh1YmllcmEgcmVsYWNpw7NuIGVudHJlIGxhcyB2YXJpYWJsZXMsIHRlbmRyw61hbW9zIGxvcyBtaXNtbyBwb3JjZW50YWplcyByZXByb2R1Y2lkb3MgZW4gbGFzIGRpc3RyaWJ1Y2lvbmVzIGNvbmRpY2lvbmFsZXMuCgorLS0tLS0tKy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0rLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKwp8IENvbDEgfCBIb21icmVzICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IE11amVyZXMgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfAorPT09PT09Kz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0rPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Kwp8IE1TICAgfCAyLjElIGRlIGhvbWJyZXMgLVw+ICNvYnNlcnZhY2lvbmVzIHNpIG5vIGhheSByZWxhY2nDs24gICAgICAgICAgfCAyLjElIGRlIG11amVyZXMgLVw+ICNvYnNlcnZhY2lvbmVzIHNpIG5vIGhheSByZWxhY2nDs24gICAgICAgICAgICB8CnwgICAgICB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8CnwgICAgICB8IGN1w6FudG8gZXMgZWwgMi4xJSBkZSAxNjE3ID0gMzQgLVw+ICNvYnMgc2kgTk8gaHViaWVyYSByZWxhY2nDs24gfCBjdcOhbnRvIGVzIGVsIDIuMSUgZGUgMTQyMSA9IDI5LjggLVw+ICNvYnMgc2kgTk8gaHViaWVyYSByZWxhY2nDs24gfAp8ICAgICAgfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfAp8ICAgICAgfCBQZXJvLCAxOSBlcyBsbyByZWFsbWVudGUgb2JzZXJ2YWRvICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IFBlcm8sIDEyIGVzIGxvIHJlYWxtZW50ZSBvYnNlcnZhZG8gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfAp8ICAgICAgfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfAp8ICAgICAgfCAoMTktMzQpXF4yICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8ICgxMi0yOS44KVxeMiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfAorLS0tLS0tKy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0rLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKwp8IFMgICAgfCAxOC42JSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IDE4LjYlICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfAorLS0tLS0tKy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0rLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKwp8IEkgICAgfCA2MS4zJSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IDYxLjMlICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfAorLS0tLS0tKy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0rLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKwp8IE1JICAgfCAxOCUgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IDE4JSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfAorLS0tLS0tKy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0rLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKwp8ICAgICAgfCAxMDAlICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IDEwMCUgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfAorLS0tLS0tKy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0rLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKwoKIyBQcnVlYmEgZXN0YWTDrXN0aWNhCgpFbCBjaGktY3VhZHJhZG8gcmVzdW1lIHF1w6kgdGFuIGNlcmNhIGVzdMOhbiBsYXMgZnJlY3VlbmNpYXMgZXNwZXJhZGFzIGRlIGxhcyBmcmVjdWVuY2lhcyBvYnNlcnZhZGFzLgpNaWVudHJhcyBtw6FzIHBlcXVlw7FhIGxhIGRpc3RhbmNpYSBlbiBjYWRhIGNlbGRhLCBtZW5vcyBwcm9iYWJpbGlkYWRlcyBkZSByZWNoYXphciBsYSBoaXDDs3Rlc2lzIG51bGEuCk1pZW50cmFzIGxhIGRpc3RhbmNpYSBtw6FzIGdyYW5kZSBlbiBjYWRhIGNlbGRhICxtw6FzIHByb2JhYmlsaWRhZGVzIGRlIHJlY2hhemFyIGxhIGhpcMOzdGVzaXMgbnVsYS4KCiQkClxjaGleMiA9IFxzdW1cZnJhY3soZl9vLWZfZSleMn17Zl9lfQokJAoKLSAgIFNpIGZvPWZlIGVuIGNhZGEgY2VsZGEsIGVudG9uY2VzIM+HXF4yID0gMAoKLSAgIENvbiBlbCB2YWxvciBkZSAkXGNoaV4yJCBzZSBjYWxjdWxhIHVuIHAtdmFsdWUsIHF1ZSB0aWVuZSBxdWUgc2VyIG1lbm9yIGRlIDAuMDUgcGFyYSByZWNoYXphciBsYSBIby4KCi0gICBTZSByZXF1aWVyZSBxdWUgaGF5YSBhbCBtZW5vcyA1IG9ic2VydmFjaW9uZXMgZW4gY2FkYSBjZWxkYQoKRW4gUiBzZSB1c2EgZWwgY29tYW5kbyBgY2hpc3EudGVzdGAgcGFyYSBjYWxjdWxhciBlbCBlc3RhZMOtc3RpY28geSBlbCBwLXZhbHVlLgpFc3RhIHBydWViYSBlcyBtZWpvciBndWFyZGFybGEgZW4gdW4gb2JqZXRvIG51ZXZvCgpgYGB7ciBwcnVlYmF9CnBydWViYSA9IGNoaXNxLnRlc3QocGVydTIzJHNhdGlzLCBwZXJ1MjMkc2V4bykKYGBgCgpMYSBwcmltZXJhIHRhYmxhIHByZXNlbnRhIGxhcyBmcmVjdWVuY2lhcyBvYnNlcnZhZGFzLCBxdWUgZXMgbG8gcXVlIHJlYWxtZW50ZSBzZSByZWNvZ2UgZW4gY2FtcG8uCkxhIHNlZ3VuZGEgdGFibGEgcHJlc2VudGEgbGFzIGZyZWN1ZW5jaWFzIGVzcGVyYWRhcyAoc2kgbm8gaHViaWVyYSByZWxhY2nDs24pLgpTZSBjb21wcnVlYmEgbG9zIGPDoWxjdWxvcyBxdWUgc2UgaGl6byBlbiBsYSB0YWJsYSBhbnRlcmlvciAobGFzIGRpZmVyZW5jaWFzIHNvbiBkZWJpZG8gYSBsYSBhcHJveGltYWNpw7NuIGRlY2ltYWwpLgoKRWwgZXN0YWTDrXN0aWNvICRcY2hpXjIkIHJlc3VtZSBsYXMgZGlmZXJlbmNpYXMgZW50cmUgbGFzIGZyZWN1ZW5jaWFzIG9ic2VydmFkYXMgeSBlc3BlcmFkYXMgZW4gY2FkYSBjZWxkYSB5IGxhcyBzdW1hIGRlIGFjdWVyZG8gYSBsYSBmw7NybXVsYS4KCmBgYHtyIGNoaX0KcHJ1ZWJhCmBgYAoKTGEgcHJ1ZWJhIG5vcyBkYSBjb21vIHJlc3VsdGFkbyB1biBwLXZhbHVlID0gMC4xMiwgcG9yIGxvIHF1ZSBOTyBzZSBwdWVkZSByZWNoYXphciBsYSBoaXDDs3Rlc2lzIG51bGEgeSBzZSBjb25jbHV5ZSBxdWUgbm8gc2FiZW1vcyBzaSBleGlzdGUgYXNvY2lhY2nDs24vcmVsYWNpw7NuL2RlcGVuZGVuY2lhIGVudHJlIGxhcyB2YXJpYWJsZXMuCgojIFRhYmxhIGNydXphZGEgZGUgc2F0aXNmYWNjacOzbiBjb24gbGEgZGVtb2NyYWNpYSBzZWfDum4gbml2ZWwgZWR1Y2F0aXZvCgpFbCBHcsOhZmljbyAxLjE0IGRlbCByZXBvcnRlIG11ZXN0cmEgbG9zIGRhdG9zIGRlIHNhdGlzZmFjY2nDs24gY29uIGxhIGRlbW9jcmFjaWEgKHNlZ8O6biBsYSB2YXJpYWJsZSByZWNvZGlmaWNhZGEgZHVtbXkpIHBvciBuaXZlbGVzIGVkdWNhdGl2by4KQ29tbyBzZWd1bmRvIGVqZW1wbG8sIGFxdcOtIHZhbW9zIGEgcmVwbGljYXIgZXNhIHJlbGFjacOzbiB1c2FuZG8gbGEgdmFyaWFibGUgb3JpZ2luYWwgZGUgdGlwbyBmYWN0b3IgcGFyYSBQZXLDuiAyMDIzLgoKVmFtb3MgYSByZWNvZGlmaWNhciBsYSB2YXJpYWJsZSBlZHVjYWNpw7NuLgpMYSB2YXJpYWJsZSBvcmlnaW5hbCAiZWRyZSIgc2VwYXJhIGxvcyBuaXZlbGVzIGVkdWNhdGl2b3MgZW4gNyBuaXZlbGVzIChkZWwgMCBhbCA2KS4KTG9zIGFuYWxmYWJldG9zIHNvbiB1biBncnVwbyBtdXkgcGVxdWXDsW8geSBwb2Ryw61hbiBjYXVzYXIgcHJvYmxlbWFzLgoKUHJpbWVybywgY3JlYW1vcyB1bmEgdmFyaWFibGUgImVkdWMiLCBjb21vIGVsIGZhY3RvciBkZSAiZWRyZSIuCkx1ZWdvLCBzZSBldGlxdWV0YS4KCmBgYHtyfQpwZXJ1MjMgPSBwZXJ1MjMgfD4KICBtdXRhdGUoZWR1YyA9IGZhY3RvcihlZHJlLCBsYWJlbHM9YygiQW5hbGZhYmV0byIsICJQcmltYXJpYSBpbmNvbXBsZXRhIiwgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIlByaW1hcmlhIGNvbXBsZXRhIiwiU2VjdW5kYXJpYSBpbmNvbXBsZXRhIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiU2VjdW5kYXJpYSBjb21wbGV0YSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIlVuaXZlcnNpdGFyaWEgbyB0w6ljbmljYSBpbmNvbXBsZXRhIiwgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIlVuaXZlcnNpdGFyaWEgbyB0w6ljbmljYSBjb21wbGV0YSIpKSkKdGFibGUocGVydTIzJGVkdWMpCmBgYAoKVmFtb3MgYSBjcmVhciBvdHJhIHZhcmlhYmxlIGRlIGVkdWNhY2nDs24gImVkdWMyIiBxdWUganVudGUgY2F0ZWdvcsOtYXMgcGFyYSBxdWUgbm8gaGF5YW4gNyBuaXZlbGVzIGVkdWNhdGl2b3MuCgpgYGB7cn0KcGVydTIzID0gcGVydTIzIHw+CiAgICBtdXRhdGUoZWR1YzI9IGNhc2Vfd2hlbigKICAgIGVkcmUgPT0gMCB+IDEsCiAgICBlZHJlID09IDEgfiAxLAogICAgZWRyZSA9PSAyIH4gMSwKICAgIGVkcmUgPT0gMyB+IDIsCiAgICBlZHJlID09IDQgfiAyLAogICAgZWRyZSA9PSA1IH4gMywKICAgIGVkcmUgPT0gNiB+IDQsCiAgICApKQpgYGAKCmBgYHtyfQpwZXJ1MjMgPSBwZXJ1MjMgfD4KICBtdXRhdGUoZWR1YzIgPSBmYWN0b3IoZWR1YzIsIGxhYmVscz1jKCJIYXN0YSBwcmltYXJpYSAiLCAiSGFzdGEgc2VjdW5kYXJpYSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIlVuaXZlcnNpdGFyaWEgbyB0w6ljbmljYSBpbmNvbXBsZXRhIiwgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIlVuaXZlcnNpdGFyaWEgbyB0w6ljbmljYSBjb21wbGV0YSIpKSkKdGFibGUocGVydTIzJGVkdWMyKQpgYGAKCkNvbiBsYSB2YXJpYWJsZSByZWNvZGlmaWNhZGEgc2UgcHVlZGUgY2FsY3VsYXIgbGEgdGFibGEgY3J1emFkYSBkZSBzYXRpc2ZhY2Npw7NuIGNvbiBsYSBkZW1vY3JhY2lhIHNlZ8O6biBuaXZlbGVzIGVkdWNhdGl2b3MuCgpgYGB7ciB0YWJsYSBlZH0KdGFibGE0ID0gdGFibGUocGVydTIzJHNhdGlzLCBwZXJ1MjMkZWR1YzIpCnRhYmxhNApgYGAKCmBgYHtyfQp0YWJsYTQgPSB0YWJsYTQgfD4KICBwcm9wLnRhYmxlKDIpIHw+CiAgcm91bmQoMykqMTAwCnRhYmxhNApgYGAKCiMgR3LDoWZpY28gYml2YXJpYWRvIGRlIHNhdGlzZmFjY2nDs24gY29uIGxhIGRlbW9jcmFjaWEgc2Vnw7puIGVkdWNhY2nDs24KCmBgYHtyfQp0YWJsYTUgPSBhcy5kYXRhLmZyYW1lKHRhYmxhNCkKdGFibGE1CmBgYAoKYGBge3J9CmdncGxvdChkYXRhPXRhYmxhNSwgYWVzKHg9VmFyMiwgeT1GcmVxLCBmaWxsPVZhcjEpKSsKICBnZW9tX2Jhcihwb3NpdGlvbj0ic3RhY2siLCBzdGF0PSJpZGVudGl0eSIpKwogIGdlb21fdGV4dChhZXMobGFiZWw9cGFzdGUoRnJlcSwgIiUiLCBzZXA9IiIpKSwgCiAgICAgICAgICAgIHBvc2l0aW9uID0gcG9zaXRpb25fc3RhY2soKSwgdmp1c3Q9MSwgc2l6ZSA9IDMpKwogIGxhYnMoeD0iTml2ZWwgZWR1Y2F0aXZvIiwgeT0iUG9yY2VudGFqZSIsIAogICAgICAgZmlsbD0iU2F0aXNmYWNjacOzbiBjb24gbGEgZGVtb2NyYWNpYSIpCmBgYAoKIyBQcnVlYmEgZXN0YWTDrXN0aWNhIGVudHJlIHNhdGlzZmFjY2nDs24gY29uIGxhIGRlbW9jcmFjaWEgc2Vnw7puIGVkdWNhY2nDs24KClBhcmEgY29tcHJvYmFyIGxhIHJlbGFjacOzbiBlbnRyZSBlc3RhcyB2YXJpYWJsZXMsIHRhbWJpw6luIHNlIHB1ZWRlIHVzYXIgbGEgcHJ1ZWJhIGRlIGluZGVwZW5kZW5jaWEgZGUgJFxjaGleMiQuCkVzdGEgZXZhbHVhY2nDs24gc2UgZ3VhcmRhIGVuIHVuIG9iamV0byAicHJ1ZWJhMiIuCgpgYGB7cn0KcHJ1ZWJhMiA9IGNoaXNxLnRlc3QocGVydTIzJHNhdGlzLCBwZXJ1MjMkZWR1YzIpCnBydWViYTIKYGBgCgpgYGB7ciBjaGkgZWR9CnBydWViYTIgPSBjaGlzcS50ZXN0KHBlcnUyMyRzYXRpcywgcGVydTIzJGVkdWMyKQpwcnVlYmEyCmBgYAoKQ29uIGVsIHZhbG9yIGRlIGVzdGFkw61zdGljbyBzZSBvYnRpZW5lIHVuIHAtdmFsdWUgbWVub3IgYSAwLjA1LCBjb24gbG8gcXVlIHNlIHJlY2hhemEgbGEgaGlww7N0ZXNpcyBudWxhIHkgc2UgYWZpcm1hIHF1ZSBsYXMgZnJlY3VlbmNpYXMgb2JzZXJ2YWRhcyBzb24gZGlmZXJlbnRlcyBkZSBsYXMgZXNwZXJhZGFzLCBjb24gbG8gcXVlIGNvbmNsdWltb3MgcXVlIHPDrSBleGlzdGUgdW5hIHJlbGFjacOzbiBkZSBkZXBlbmRlbmNpYSBlbnRyZSBsYXMgdmFyaWFibGVzLgpFc3RvIHF1aWVyZSBkZWNpciBxdWUgZW4gUGVyw7ogZW4gMjAyMyBleGlzdGVuIGRpZmVyZW5jaWFzIGVuIGxhIHNhdGlzZmFjY2nDs24gY29uIGxhIGRlbW9jcmFjaWEgZW50cmUgZGlmZXJlbnRlcyBncnVwb3MgcG9yIG5pdmVsIGVkdWNhdGl2by4K</div>


</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->
<script>
$(document).ready(function () {
  window.initializeSourceEmbed("clase7.Rmd");
});
</script>

<script>
$(document).ready(function ()  {

    // temporarily add toc-ignore selector to headers for the consistency with Pandoc
    $('.unlisted.unnumbered').addClass('toc-ignore')

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
